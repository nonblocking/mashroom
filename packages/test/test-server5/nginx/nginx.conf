events {}
http {
  server {
    listen 80;
    server_name                 mashroom-demo.com;

    location ~ / {
      proxy_pass                http://host.docker.internal:5050;
      proxy_set_header          Host localhost:6060;
      proxy_set_header          X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_read_timeout        60s;
      proxy_connect_timeout     10s;
    }
  }

  server {
      listen 443 ssl;
      server_name               mashroom-demo.com;

       ssl_certificate          /etc/nginx/certs/mashroom-demo.crt;
       ssl_certificate_key      /etc/nginx/certs/mashroom-demo.key;
       ssl_protocols            TLSv1.2 TLSv1.3;

      location ~ / {
        proxy_pass              http://host.docker.internal:5050;
        proxy_set_header        Host localhost:6063;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        X-Forwarded-Proto https;
        proxy_read_timeout      60s;
        proxy_connect_timeout   10s;
      }
    }
}

